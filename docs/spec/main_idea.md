I want to index Uniswap v4 events without paying third-party RPC providers by building a stateless history client. “Stateless” here means: no EVM execution, no state trie/database, no archive/full node state growth. The client will only acquire and persist history artifacts needed for event indexing: canonical block headers (timestamp/number/hash/parent), transaction receipts (logs/events), and optionally a minimal extracted tx record (tx hash, from/to, value) rather than raw calldata. Correctness will be “stage-1 pragmatic”: I will accept weaker trust assumptions (e.g., trusting my own upstream sources or peer set) while still optionally validating that fetched receipts match the header’s receiptsRoot.

Phase 1 (Ethereum L1): implement an EL devp2p/ETH history client that peers with Ethereum execution nodes and fetches headers + receipts (and optionally bodies for a short rolling window), storing only what’s required for indexing and re-serving cached data to remain a useful peer.

Phase 2 (OP-based): After this works end-to-end on L1, extend the same principle to OP Stack L2s (Base, later Optimism): run the same style of client against op-geth/op-reth peers to fetch L2 headers + receipts over EL P2P, again without executing transactions or maintaining state. Only if peer history availability proves insufficient would I introduce heavier components (e.g., rollup-node derivation + execution client), but the intended path is P2P receipts ingestion → persistent receipts/log DB → indexer, staying stateless throughout. If needed - we can use our L1 RPC for op-node requirement (and can even filter the data it needs that's stored in L1 calldata).
