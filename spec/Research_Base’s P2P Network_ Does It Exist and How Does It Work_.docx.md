# Base’s P2P Network: Does It Exist and How Does It Work?

Yes – **Base** (Coinbase’s L2, built on the OP Stack) **does have a peer-to-peer (P2P) networking layer**, inherited from the Optimism Stack. In fact, Base uses the same OP Stack P2P design that Optimism introduced (initially as an optional “beta” feature) in the Bedrock upgrade. Below, we break down how Base’s P2P network operates, what data it provides, and the current state of its usage.

## Discovery and ENR Bootnodes for Base Mainnet

Base nodes find each other using the Ethereum Node Discovery v5 (discv5) protocol, just like Optimism[\[1\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=In%20summary%2C%20the%20P2P%20stack,looks%20like)[\[2\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=). Each Base node publishes an **Ethereum Node Record (ENR)** with a special field opstack that identifies it as a Base network participant. The opstack entry encodes two numbers via RLP: the chain’s **Chain ID** (8453 for Base Mainnet) and the **current fork ID**[\[3\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=The%20,value%2C%20the%20concatenation%20of). The fork ID corresponds to the latest OP Stack network upgrade active on the chain.

* **Base Mainnet Chain ID:** 8453

* **Current Fork ID:** As of 2025, Base Mainnet has undergone multiple OP Stack upgrades (Bedrock, Regolith, *Ecotone*, *Isthmus*, etc.). The *Isth:ius* hard fork (active since May 9, 2025\) is the latest known major upgrade[\[4\]](https://docs.optimism.io/notices/archive/upgrade-15#:~:text=The%20Isthmus%20hard%20fork%20for,the%20hard%20fork%20inheritance%20behavior). In OP Stack P2P, **Bedrock/Regolith/Canyon correspond to fork 0, Ecotone to 1, and Isthmus to 2**[\[5\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=%60). **Thus Base’s ENR opstack field currently is 8453|2** (chain 8453 \+ fork 2), indicating the Isthmus version.

To bootstrap peer discovery, Base provides a set of **bootstrap ENRs (bootnodes)** for mainnet. These are static nodes (run by Base or partners) that new nodes query via the DHT to find other peers. For example, the Base node configuration includes a list of ENR bootnodes like:

OP\_NODE\_P2P\_BOOTNODES=enr:-J24QNz9lbrKbN4iSmmjtnr7SjUMk4zB7f1krHZcTZx-...,  
enr:-J24QH-f1wt99sfpHy4c0QJM-NfmsIfmlLAMMcgZCUEgK...,  
enr:-J24QDXyyxvQYsd0yfsN0cRr1lZ1N11zGTplMNlW4xNEc7... (etc)

These are Base mainnet ENRs in base64 form[\[6\]](https://medium.com/@hiroyukinaito.eth/running-base-node-without-docker-part-2-1c34dbca8909#:~:text=OP_NODE_NETWORK%3Dbase,9CS842lGpLmqGAYiOoDRAgmlkgnY0gmlwhLhIgb2Hb3BzdGFja4OFQgCJc2VjcDI1NmsxoQJ9FTIv8B9). Each contains the node’s IP, UDP port (for discv5), TCP port, secp256k1 pubkey (for identity), and the opstack bytes (chain/fork). Using these, a Base node can perform discv5 lookups to populate its peer table. Notably, **Base (and OP Stack chains) share the Ethereum consensus-layer DHT** – meaning discovery happens in the large global DHT used by Ethereum 2.0, keyed by Node IDs, which makes censorship harder[\[7\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=Note%20that%20DiscV5%20is%20a,the%20discovery%20of%20node%20records). The node filters discovered ENRs to those matching Base’s chain ID and an acceptable fork ID (current or future)[\[8\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=iterate%20RandomNodes,list%2C%20attempt%20to%20dial).

**In summary:** Base does have P2P discovery. You enable it by configuring your op-node with discovery on (providing an UDP port, a P2P private key, and bootstrap ENRs). The Base repo’s .env.mainnet file shows these variables (advertise IP, listen ports 9001, bootnode ENRs, etc.)[\[9\]](https://medium.com/@hiroyukinaito.eth/running-base-node-without-docker-part-2-1c34dbca8909#:~:text=,YOUR%20PUBLIC%20IP%20ADDRESS)[\[10\]](https://medium.com/@hiroyukinaito.eth/running-base-node-without-docker-part-2-1c34dbca8909#:~:text=OP_NODE_NETWORK%3Dbase,sMoeCDkusCsk4BYHjjCq04N0Y3CCJAaDdWRwgiQG%2Cenr). If configured, your node will join the Base P2P network and start finding peers via discv5.

## Transport: libp2p with Noise and Multiplexing

Once peers discover each other’s ENRs, **Base nodes establish libp2p connections** for data exchange. Optimism’s spec mandates using [**libp2p**](https://libp2p.io) as the networking stack[\[1\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=In%20summary%2C%20the%20P2P%20stack,looks%20like)[\[11\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=). Key details of the transport layer:

* **Transport Protocol:** TCP (by default)[\[12\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=). Nodes listen on a TCP port (in Base’s config, default 9001\) for incoming libp2p connections. IPv4/IPv6 are supported; nodes should be publicly dialable (no reliance on relays)[\[13\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=TCP%20transport,by%20LibP2P%2C%20but%20not%20required).

* **Encryption/Security:** [**Noise protocol (XX handshake)**](https://github.com/libp2p/specs/tree/master/noise) using the node’s secp256k1 identity key[\[14\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=). This is the same secure channel used in Eth2’s networking. (TLS 1.3 is an alternative in libp2p, but Noise is preferred and is what OP Stack uses by default.)

* **Multiplexing:** [**mplex**](https://github.com/libp2p/specs/tree/master/mplex) (v6.7.0) is **required**, and [**yamux**](https://github.com/libp2p/specs/tree/master/yamux/1.0.0) is optional[\[12\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=). These allow multiple logical substreams over one TCP connection, so the node can handle different protocols concurrently (requests, gossip, ping, etc.).

* **Peer Identity:** Each node has a libp2p Peer ID (derived from its pubkey). The connection handshake exchanges these and supports the **Identify** protocol (sharing client name/version) and **Ping** for latency measurement[\[15\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=). These help peers manage connections but can be disabled for privacy if desired.

* **Protocol Negotiation:** Uses [**multistream-select v1.0**](https://github.com/libp2p/specs/tree/master/connection-establishment) to agree on supported sub-protocols after the base libp2p connection is established[\[16\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=). Essentially, once two Base nodes connect, they’ll negotiate which application protocols (like gossip, req-resp) to speak.

In short, **Base’s P2P runs on libp2p**, similar to Ethereum’s consensus clients. The design closely mirrors Ethereum’s PoS network stack (discv5 \+ libp2p)[\[17\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=Go%2FRust%2FJava%2FNim%2FJS%2Fmore%2C%20and%20are%20adopted%20by,Eth2). For the end-user, this means if you run a Base node with P2P enabled, it will open a TCP port, perform Noise-secured handshakes with other Base peers, and multiplex multiple streams of data.

## Data Protocols: Block Gossip and Request/Response

The P2P layer provides two main classes of data to Base nodes:

1. **Block Gossip (Pub/Sub)** – **New L2 blocks can be gossiped** in real-time to peers, reducing reliance on L1 for “tip” updates.

2. **On-Demand Block Fetching (Req/Resp)** – Peers can **request historical blocks by number** to fill gaps or speed up sync.

Let’s examine each:

### Gossip: Real-Time Block Propagation (optional)

Base uses **GossipSub 1.1** (the same pub-sub protocol used in Ethereum) for propagating newly sequenced blocks[\[18\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=). There are dedicated gossip topics per chain and per fork version. According to the spec, topics use the format:

/optimism/\<chain\_id\>/\<fork\_version\>/blocks

For example, Base Mainnet (chain 8453\) under Bedrock/Regolith had topic /optimism/8453/0/blocks. After the **Canyon/Delta** fork (OP Stack upgrade enabling EIP-4844 prerequisites), it would use /optimism/8453/1/blocks, and so on for Ecotone (/8453/2/blocks) and Isthmus (/8453/3/blocks)[\[19\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=)[\[20\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=Pre,chainId%3E%2F0%2Fblocks). Each new L2 block is published by the sequencer to the current topic.

**Block Gossip Message Format:** The payload contains the block in a compact form. For Bedrock/Canyon-era (v1 and v2 topics), a gossip message \= Signature || ExecutionPayload[\[21\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=Block%20encoding). The sequencer signs each block with its private key (65-byte secp256k1 sig) to prove origin[\[22\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=,block%20root%2C%20always%2032%20bytes). The remainder is the SSZ-encoded ExecutionPayload (the block header and transactions, see below), compressed with Snappy[\[23\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=). In Ecotone (v3 topics), an extra 32-byte parentBeaconBlockRoot is included (to link the L1 context)[\[24\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=%28uint256%29%2C%20y_parity%20%28uint8%29%60%20,always%20the%20remaining%20bytes) along with the signature and payload. All gossip messages are snappy-compressed and limited to 10 MB[\[25\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=).

Peers validate gossiped blocks (checking the sig, basic block validity, etc.) before fully trusting them[\[26\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=%23%23%20Content)[\[27\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=). Gossip is **“optimistic”** – it lets nodes see new L2 blocks instantly, but the canonical chain is still ultimately decided by L1. If a bad block is gossiped, nodes will eventually ignore it when L1 disagrees, but meanwhile gossip can greatly reduce latency in the *happy case*[\[28\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=The%20rollup%20node%20has%20an,on%20a%20single%20centralized%20endpoint)[\[29\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=The%20rollup%20node%20will%20always,improve%20the%20happy%20case%20performance).

**Note:** Participating in block gossip is optional for node operators. Verifier nodes can subscribe to gossip to get real-time updates, but even if they don’t, the node will always catch up via L1 data. Gossip just makes the “unsafe head” tracking faster. For our purpose (historical data syncing), gossip is less critical – the request/response protocol is our focus.

### Request/Response: payload\_by\_number Protocol (Historical Block Fetch)

The **flagship feature** of OP Stack P2P for our use-case is the **payload\_by\_number request/response protocol**. This allows one node to directly ask another for a specific L2 block by its number, and get the full block (execution payload) in response[\[30\]\[31\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=payload_by_number). This is extremely useful to quickly sync missing history (instead of reconstructing everything from L1 transactions).

**Protocol Identifier:** /opstack/req/payload\_by\_number/8453/0/ for Base Mainnet[\[32\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=Protocol%20ID%3A%20%60%2Fopstack%2Freq%2Fpayload_by_number%2F%3Cchain). (Here 8453 is the chain ID; the trailing /0/ is a schema version for the protocol itself. Currently 0 is the only version defined.)

**Request format:** a 64-bit little-endian integer representing the L2 block number you want[\[33\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=Request%20format%3A%20%60%3Cnum%3E%60%3A%20a%20little,the%20block%20number%20to%20request). For example, to fetch block 5000000, the requesting node sends the byte representation of 5000000\.

**Response format:** a stream of bytes that decode as:

\<res\_code\>\<version\>\<payload\_bytes\>

Where:

* \<res\_code\> \= a 1-byte result code[\[34\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=Response%20format%3A%20%60):

* 0 \= success (block found) – then a \<version\> and \<payload\> follow.

* 1 \= request was valid but that payload is unavailable (peer doesn’t have it).

* 2 \= invalid request (e.g., out of range).

* \>=3 \= other errors.  
  *(Non-zero codes mean no payload is returned; they’re mainly for debugging. A well-behaved client treats any non-zero as a failure to get the block)[\[35\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=,block%2C%20read%20till%20stream%20EOF)[\[36\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=A%20%60res%20,responding%20peer%20cannot%20be%20trusted).*

* \<version\> \= a 4-byte little-endian uint32 indicating the **fork/version of the block format**[\[37\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=,block%2C%20read%20till%20stream%20EOF). This is essentially the **fork ID of the block being returned**. It tells you how to decode \<payload\>. The mapping is:

* 0 – The payload is an **SSZ-encoded ExecutionPayload** (snappy-compressed) for Bedrock, Regolith, or Canyon blocks[\[5\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=%60).

* 1 – The payload is an **SSZ-encoded ExecutionPayloadEnvelope** (snappy-compressed) for Ecotone blocks[\[38\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=%2A%20%600%60%3A%20SSZ,definition%20of%20the%20L2%20Ecotone). (Ecotone introduced blobs/EIP-4844, which changed the block structure by wrapping the execution payload with blob data.)

* 2 – The payload is back to an **SSZ ExecutionPayload** (snappy) for Isthmus blocks[\[39\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=L2%20Regolith%2C%20L2%20Canyon%20versions,of%20the%20L2%20Isthmus%20version). (In Isthmus, the OP Stack aligned with Ethereum’s Pectra upgrades, likely reverting to a unified payload structure.)

In practice, Base blocks up to late Mar 2024 are version 0 (Bedrock/Regolith). Blocks from the **Ecotone upgrade (Mar 2024\)** until the **Isth:ius upgrade (May 2025\)** would return version 1 (since Ecotone added blob data). Blocks after Isthmus return version 2\. Your client should check this \<version\> to know how to parse the bytes.

* \<payload\> \= the actual block bytes, **SSZ-encoded and then Snappy compressed**[\[40\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=%2A%20%600%60%3A%20SSZ,of%20the%20L2%20Isthmus%20version). After decompressing, you get either an ExecutionPayload or ExecutionPayloadEnvelope SSZ object, as indicated by \<version\>. This object contains the full block: header fields (block number, prev hash, state root, etc), all transactions in the block, and other fields like deposits, withdrawals, and blob commitments (if applicable to that fork). It does **not** directly contain the receipts or intermediate state, as those are derived data (just like on L1, receipts are not in the block body).

**ExecutionPayload SSZ Schema:** The schema largely follows Ethereum’s Merge definitions, with modifications for the rollup. In Bedrock, ExecutionPayload is almost identical to Ethereum’s (including receipts\_root, logs\_bloom, etc.)[\[40\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=%2A%20%600%60%3A%20SSZ,of%20the%20L2%20Isthmus%20version). Ecotone’s ExecutionPayloadEnvelope likely includes extra fields for blobs (similar to Ethereum’s post-Dencun block structure), wrapping an inner payload. Isthmus then updates to the new Pectra schema (“Prague” changes, e.g. the new withdrawals root in block header)[\[41\]](https://docs.optimism.io/notices/archive/upgrade-15#:~:text=Isthmus%20contains%20these%20main%20changes%3A). For the exact SSZ definitions, one can refer to Optimism’s specs or code – but the key point is that **the P2P layer transmits raw L2 blocks in the appropriate format**, which your node can decode and then feed into an execution client or process as needed.

**Using payload\_by\_number:** A node that has P2P enabled will respond to these requests if it has the block. This is very useful for a few scenarios: \- **Historical sync/backfill:** Instead of replaying deposits from L1 one by one (which is slow), a node can quickly fetch blocks from peers in parallel. The spec explicitly notes it’s designed to “fill gaps upon missed gossip, and sync short to medium ranges of unsafe L2 blocks”[\[42\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=This%20is%20an%20optional%20chain,ranges%20of%20unsafe%20L2%20blocks)[\[43\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=The%20request%20is%20by%20block,a%20chain%20across%20many%20peers). You could, for example, fetch hundreds of old blocks from various peers concurrently by number. \- **Receipts/logs retrieval:** If you want historical receipts, you can fetch the block via P2P, then either (a) execute it locally to produce receipts, or (b) if you trust the peer, possibly ask them for derived data (though there’s no direct protocol for receipts – you’d generally get the block and compute receipts yourself with an execution engine). \- **Filling missing blocks:** If your node fell behind or missed some range, this is faster than waiting for L1 or an archive RPC.

**Limitations:** The OP Stack recommends capping responses to \~10 MB to avoid resource abuse[\[44\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=The%20input%20of%20%60,this%20sync%20method%20is%20optional). In practice, blocks on Base are far smaller than that (even full blocks with blobs should be well under 1–2 MB). A responding peer will likely **Snappy-compress** the payload for efficiency. If a block is unavailable (e.g., you request a very old block that the peer pruned), you get res=1. Not all peers are guaranteed to have the full history – sequencer nodes will, and some full nodes might if configured as archive; others might prune old blocks once finalized by L1.

**Peer Serving Behavior:** The P2P spec marks payload\_by\_number as *optional*, meaning a minimal node might not implement it[\[31\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=payload_by_number). However, **the reference op-node does support it**, and any node running in “verifier” mode with P2P will serve blocks it has to others. In Base’s case, the **sequencer (Coinbase)** is likely running an op-node with P2P to propagate new blocks; whether it responds to direct block requests from random peers is not certain (it **should**, unless firewall rules prevent it, since it’s the same protocol). Community-run full nodes definitely can exchange blocks among each other.

## What Data Can You Get (and Not Get) via Base P2P?

From the above, the **P2P network provides primarily block data**. In summary:

* **Full L2 Blocks** – **Yes.** Through payload\_by\_number you can retrieve the full execution payload (all transactions and header metadata for a given block)[\[40\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=%2A%20%600%60%3A%20SSZ,of%20the%20L2%20Isthmus%20version). This includes deposit transactions (the special L1-originating txns), user transactions, and system transactions (like the **L1 info tx** in each block). With the block, you have everything needed to derive state changes and receipts (given the proper execution engine).

* **Receipts and Logs** – **Not directly.** The P2P protocols do *not* have a dedicated method to request receipts or logs for a block. However, once you have the block, you can run it through an execution client to get the receipts. (The block’s receipts\_root is in the header, so you can always verify any receipts you compute match it for integrity.) If your goal is to fetch historical logs/events, you’d use P2P to grab blocks, then process them locally.

* **Block Headers or Hashes Only** – **Not by themselves.** There isn’t a separate lightweight protocol for just headers or just block hashes in OP Stack P2P. It’s all or nothing (full blocks). That said, the gossip essentially gives you headers (since a block contains its header) for new ones, and you could ignore the transactions if you only care about headers. In the future, perhaps a header sync could be added, but currently it’s not specified.

* **Real-time New Blocks** – **Yes, via Gossip.** If you subscribe to the gossip topic and have peers, you’ll receive new blocks the sequencer publishes, almost instantly after they are created. This is useful for staying in sync with the chain head without depending on the Base RPC or waiting for L1 confirmations.

* **Peer information** – Indirectly yes. Through the libp2p Identify and Ping protocols, you can learn about peer client versions and measure latency[\[45\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=). Also, op-node has an JSON-RPC namespace (opp2p in op-node’s admin API) that can list connected peers, etc., for monitoring[\[46\]](https://docs.optimism.io/operators/node-operators/json-rpc#:~:text=op,opp2p_self). But this is more “meta” data.

* **Transactions (mempool)** – **Not via this network.** OP Stack does not use libp2p for mempool gossip of transactions (at least not yet). Transactions are submitted to the sequencer via RPC. There is no equivalent of Ethereum’s “tx gossip” in OP Stack P2P, except an **optional** flag some clients have to disable L1-style gossip (since it’s not needed in a single-sequencer system)[\[47\]](https://reth.rs/run/opstack/#:~:text=Stack%20chains.%20Aliases%3A%20%60,computing%20of%20the%20pending%20block). So, you cannot rely on P2P to get pending txs or anything – it’s focused on blocks.

## Deploying Base P2P: Peer Availability and Usage

One natural question: **Does Base’s P2P network have many peers, and do most nodes enable it?** Since P2P was introduced relatively recently (Bedrock in 2023), it’s still in early stages of adoption on L2s:

* **Peer Count & Density:** The Base team has provided bootnodes, so the network is at least connectable. In practice, the number of public Base nodes running P2P is likely modest. Many users run nodes primarily with the intention of using RPC, and might not turn on P2P features. However, there is a growing community of node operators (as seen in Base’s Discord, forums, and community guides) who do enable P2P to help decentralize the network. Base’s own sequencer and infrastructure nodes presumably run P2P to participate in the Superchain network. OP Labs mentioned efforts to “increase global peer coverage”[\[48\]](https://github.com/base/node/issues/222#:~:text=Image%3A%20%40TangMonk) – for example, ensuring bootnodes/peers in various regions – indicating awareness that more peers are needed but it’s gradually growing.

* **Default Configuration:** As of the Bedrock release, P2P was behind feature flags. Node operators had to **explicitly enable** discovery and p2p by settings env vars or flags (like \--p2p.listen.ip/port, \--p2p.bootnodes, and OP\_NODE\_BETA\_EXTRA\_NETWORKS=true as seen in Base’s env)[\[9\]](https://medium.com/@hiroyukinaito.eth/running-base-node-without-docker-part-2-1c34dbca8909#:~:text=,YOUR%20PUBLIC%20IP%20ADDRESS)[\[10\]](https://medium.com/@hiroyukinaito.eth/running-base-node-without-docker-part-2-1c34dbca8909#:~:text=OP_NODE_NETWORK%3Dbase,sMoeCDkusCsk4BYHjjCq04N0Y3CCJAaDdWRwgiQG%2Cenr). This “beta” flag suggests that by default, op-node might run without P2P unless turned on. Over time, newer releases may have P2P on by default for standard chains, but one should not assume it – always check the documentation for the op-node version you run. For Base, the official node guide instructs adding those P2P configs, meaning it’s opt-in for now. In other words, **not every Base node you spin up will automatically join P2P** – you must configure it to do so. Those that do will find each other.

* **Serving payload\_by\_number:** If you enable P2P, your node by default will both request **and serve** payload\_by\_number queries. The op-node implementation is symmetrical: non-sequencer nodes will gladly share blocks they have with peers (after all, it doesn’t compromise security – everything is validated against L1). The only caveat is if a node doesn’t have the data (e.g., it pruned old blocks or hasn’t synced that far, it returns code 1). The **Base sequencer** likely has all data; whether it serves it is up to its policy (since it could theoretically refuse by not responding, but that would be against the protocol spec – more likely it would serve like any other peer).

* **Reliability:** Since P2P is still new, you may encounter some hiccups – e.g. peers disconnecting, or limited peers until discovery finds more. But generally, the libp2p stack is robust (borrowed from Ethereum). Peers also periodically Ping to maintain connections and drop if unresponsive[\[49\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=), and there are scoring/banning mechanisms to guard against malicious actors[\[50\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=This%20also%20means%20that%20P2P,data%20from%20L1%20to%20serve).

* **Security:** All P2P data is untrusted until verified. Blocks from peers are considered “unsafe” until confirmed by L1. The node will always eventually reconcile any differences by checking L1 data (thus you don’t risk falling for an invalid fork permanently)[\[29\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=The%20rollup%20node%20will%20always,improve%20the%20happy%20case%20performance). Peers that misbehave (send bad blocks, etc.) will be penalized or banned locally. So the design is security-first.

**Bottom line:** Base’s P2P network **exists and works** similarly to Ethereum’s, but it’s still in a growth phase. It provides a powerful way to get block data faster and more efficiently. For developers like us wanting historical data (blocks, receipts, logs), this is great news: we can use payload\_by\_number to quickly sync Base’s history without relying solely on archive RPCs. We just need to ensure we have some peers. Using the provided bootnodes and enabling P2P in our node will connect us to whatever peer pool is out there (which at least includes the official nodes). From there, we can fetch blocks as needed and extract the receipts.

## Rust Implementation and Integration

You might also wonder: are there **existing implementations or libraries in Rust** for OP Stack P2P (since we may want to integrate this into a Rust tool)? The answer is **yes, emerging ones**:

* **Magi (Rust Rollup Client by a16z):** This is a fully open-source OP Stack consensus client written in Rust (an alternative to op-node). **Magi implements the P2P networking using Rust’s libp2p**. In fact, libp2p’s own documentation highlights that *“Magi… uses rust-libp2p as part of its networking stack.”*[\[51\]](https://docs.libp2p.io/concepts/introduction/users/#:~:text=and%20monitoring%20of%20the%20network%E2%80%99s,libp2p%2C%20Mina%20has%20achieved%20a). Magi can discover peers and exchange blocks just like op-node. If you prefer Rust, studying Magi’s code might provide insight into how to integrate discv5 and the req/resp protocol. (Magi is quite new, though – ensure it’s up-to-date with Base’s latest fork).

* **Kona-node (Rust):** Optimism has an experimental Rust client called Kona (mentioned by OP Labs)[\[52\]](https://docs.optimism.io/node-operators/guides/configuration/consensus-clients#:~:text=kona). It’s not as battle-tested, but it’s another example of implementing the OP Stack in Rust. Its status is experimental, but it indicates the community’s interest in Rust implementations.

* **rust-libp2p usage:** Implementing payload\_by\_number in Rust will likely leverage the libp2p::request\_response framework. The Rust libp2p library provides a generic **RequestResponse** behaviour for exactly this purpose – one node sends a request and waits for a response on a substream[\[53\]](https://docs.rs/libp2p-request-response/latest/libp2p_request_response/#:~:text=The%20Behaviour%20%20struct%20is,are%20available%20via%20the%20Config). We would define a custom Codec to handle encoding/decoding of our request (the block number as 8 bytes) and response (the byte stream with res code, version, and payload). This isn’t theoretical – it’s how Magi and others do it. The recommended approach (as noted on Stack Overflow) is to use the request-response behaviour rather than writing raw substreams manually[\[54\]](https://stackoverflow.com/questions/72106479/point-to-point-request-response-behavior-with-libp2p#:~:text=For%20everybody%20who%20finds%20this,response%20network%20behavior). With it, you register a protocol name (/opstack/req/payload\_by\_number/8453/0 for Base), and then you can call send\_request(peer, block\_number) and handle the Response event asynchronously. The codec will need to Snappy-compress/decompress and SSZ-encode/decode the payloads.

* **Existing libraries:** While there isn’t yet an off-the-shelf “OP Stack P2P crate” on crates.io, the building blocks are all there. We have crates for SSZ (e.g. *ethereum-consensus* crates for Beacon chain which could be adapted, or custom SSZ serializers), for Snappy (e.g. the snap crate), and libp2p for networking. We may also reuse data structures from **reth** (the Rust Ethereum client) – note that **op-reth** (Paradigm’s fork of reth for Optimism) includes OP Stack adaptations, but as an *execution* client it still relies on an external consensus component. However, reth’s components might help parse ExecutionPayloads. The OP Stack spec and Optimism’s Go code (op-node) are the reference for ensuring our Rust code encodes/decodes exactly as expected.

In short, writing a Rust tool to fetch Base blocks via P2P is feasible and others have done similar things (Magi). **Libp2p’s flexibility** makes it straightforward to implement a custom protocol. We just need to handle the SSZ and compression details in the codec. For example, we’ll create a PayloadByNumberCodec that implements RequestResponseCodec with Request \= u64 and Response \= Vec\<u8\> (or a structured type for the payload plus version). The codec’s read\_response will decompress and return the raw bytes or parsed payload. The write\_request will take a u64 and write it in little-endian. This aligns with the behavior described in the official spec[\[33\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=Request%20format%3A%20%60%3Cnum%3E%60%3A%20a%20little,the%20block%20number%20to%20request)[\[40\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=%2A%20%600%60%3A%20SSZ,of%20the%20L2%20Isthmus%20version).

## Conclusion

**Base’s P2P layer absolutely exists** – it’s a key part of the OP Stack’s move toward decentralization (eventually enabling multiple sequencers, etc.). Today, it provides a faster, direct way for nodes to share block data. By using discv5 discovery with the opstack tag, Base nodes find each other in Ethereum’s global DHT[\[7\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=Note%20that%20DiscV5%20is%20a,the%20discovery%20of%20node%20records). They connect via libp2p (Noise-secured TCP streams)[\[14\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=) and speak common protocols: gossip for new blocks, and a request/response for on-demand blocks[\[31\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=payload_by_number). The data you get is the raw L2 chain data (blocks), which you can use to reconstruct transaction history and receipts off-chain.

For our purposes – building a “history harness” – tapping into Base’s P2P means we can **fetch historical blocks trustlessly and efficiently**. We’ll leverage the payload\_by\_number protocol to retrieve execution payloads block by block (and likely in parallel from multiple peers). With those in hand, we can extract receipts and logs just as we do from an RPC, but without hitting rate limits or needing an archive node. It’s essentially like running our own full node that syncs by asking peers for blocks.

Do note that this requires running a Base node or at least a partial one with networking – but given the rewards (access to all data), it’s worth it. We should use the official bootnodes[\[6\]](https://medium.com/@hiroyukinaito.eth/running-base-node-without-docker-part-2-1c34dbca8909#:~:text=OP_NODE_NETWORK%3Dbase,9CS842lGpLmqGAYiOoDRAgmlkgnY0gmlwhLhIgb2Hb3BzdGFja4OFQgCJc2VjcDI1NmsxoQJ9FTIv8B9) to get started, ensure our node advertises correctly (public IP and ports open), and then issue our block requests. As the OP Stack P2P network matures, we can expect even more peers and possibly new data types (like bridging messages, state sync, etc.), but for now blocks are the main offering – and that’s exactly what we need.

**Sources:**

* Optimism OP Stack P2P Specification[\[2\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=)[\[5\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=%60)[\[40\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=%2A%20%600%60%3A%20SSZ,of%20the%20L2%20Isthmus%20version)

* Base node configuration example (bootnodes and P2P env)[\[6\]](https://medium.com/@hiroyukinaito.eth/running-base-node-without-docker-part-2-1c34dbca8909#:~:text=OP_NODE_NETWORK%3Dbase,9CS842lGpLmqGAYiOoDRAgmlkgnY0gmlwhLhIgb2Hb3BzdGFja4OFQgCJc2VjcDI1NmsxoQJ9FTIv8B9)[\[9\]](https://medium.com/@hiroyukinaito.eth/running-base-node-without-docker-part-2-1c34dbca8909#:~:text=,YOUR%20PUBLIC%20IP%20ADDRESS)

* Base & Optimism upgrade info (Ecotone, Isthmus timings)[\[4\]](https://docs.optimism.io/notices/archive/upgrade-15#:~:text=The%20Isthmus%20hard%20fork%20for,the%20hard%20fork%20inheritance%20behavior)[\[55\]](https://blog.base.org/how-base-is-driving-down-fees-across-the-board-with-eip-4844#:~:text=two%20years.%20EIP,fee%20reductions%20to%20the%20Superchain)

* libp2p usage in OP Stack (Magi, Base noted by libp2p docs)[\[56\]](https://docs.libp2p.io/concepts/introduction/users/#:~:text=scalable%2C%20and%20efficient%20light%20client,nodes%2C%20crucial%20for%20decentralized%20applications)[\[51\]](https://docs.libp2p.io/concepts/introduction/users/#:~:text=and%20monitoring%20of%20the%20network%E2%80%99s,libp2p%2C%20Mina%20has%20achieved%20a)

* Rust libp2p request/response reference[\[53\]](https://docs.rs/libp2p-request-response/latest/libp2p_request_response/#:~:text=The%20Behaviour%20%20struct%20is,are%20available%20via%20the%20Config)[\[54\]](https://stackoverflow.com/questions/72106479/point-to-point-request-response-behavior-with-libp2p#:~:text=For%20everybody%20who%20finds%20this,response%20network%20behavior)

---

[\[1\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=In%20summary%2C%20the%20P2P%20stack,looks%20like) [\[2\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=) [\[3\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=The%20,value%2C%20the%20concatenation%20of) [\[5\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=%60) [\[7\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=Note%20that%20DiscV5%20is%20a,the%20discovery%20of%20node%20records) [\[8\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=iterate%20RandomNodes,list%2C%20attempt%20to%20dial) [\[11\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=) [\[12\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=) [\[13\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=TCP%20transport,by%20LibP2P%2C%20but%20not%20required) [\[14\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=) [\[15\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=) [\[16\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=) [\[17\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=Go%2FRust%2FJava%2FNim%2FJS%2Fmore%2C%20and%20are%20adopted%20by,Eth2) [\[18\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=) [\[19\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=) [\[20\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=Pre,chainId%3E%2F0%2Fblocks) [\[21\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=Block%20encoding) [\[22\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=,block%20root%2C%20always%2032%20bytes) [\[23\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=) [\[24\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=%28uint256%29%2C%20y_parity%20%28uint8%29%60%20,always%20the%20remaining%20bytes) [\[25\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=) [\[26\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=%23%23%20Content) [\[27\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=) [\[28\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=The%20rollup%20node%20has%20an,on%20a%20single%20centralized%20endpoint) [\[29\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=The%20rollup%20node%20will%20always,improve%20the%20happy%20case%20performance) [\[30\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=payload_by_number) [\[31\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=payload_by_number) [\[32\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=Protocol%20ID%3A%20%60%2Fopstack%2Freq%2Fpayload_by_number%2F%3Cchain) [\[33\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=Request%20format%3A%20%60%3Cnum%3E%60%3A%20a%20little,the%20block%20number%20to%20request) [\[34\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=Response%20format%3A%20%60) [\[35\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=,block%2C%20read%20till%20stream%20EOF) [\[36\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=A%20%60res%20,responding%20peer%20cannot%20be%20trusted) [\[37\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=,block%2C%20read%20till%20stream%20EOF) [\[38\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=%2A%20%600%60%3A%20SSZ,definition%20of%20the%20L2%20Ecotone) [\[39\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=L2%20Regolith%2C%20L2%20Canyon%20versions,of%20the%20L2%20Isthmus%20version) [\[40\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=%2A%20%600%60%3A%20SSZ,of%20the%20L2%20Isthmus%20version) [\[42\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=This%20is%20an%20optional%20chain,ranges%20of%20unsafe%20L2%20blocks) [\[43\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=The%20request%20is%20by%20block,a%20chain%20across%20many%20peers) [\[44\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=The%20input%20of%20%60,this%20sync%20method%20is%20optional) [\[45\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=) [\[49\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=) [\[50\]](https://specs.optimism.io/protocol/rollup-node-p2p.html#:~:text=This%20also%20means%20that%20P2P,data%20from%20L1%20to%20serve) Rollup Node P2P \- OP Stack Specification

[https://specs.optimism.io/protocol/rollup-node-p2p.html](https://specs.optimism.io/protocol/rollup-node-p2p.html)

[\[4\]](https://docs.optimism.io/notices/archive/upgrade-15#:~:text=The%20Isthmus%20hard%20fork%20for,the%20hard%20fork%20inheritance%20behavior) [\[41\]](https://docs.optimism.io/notices/archive/upgrade-15#:~:text=Isthmus%20contains%20these%20main%20changes%3A) Optimism Documentation

[https://docs.optimism.io/notices/archive/upgrade-15](https://docs.optimism.io/notices/archive/upgrade-15)

[\[6\]](https://medium.com/@hiroyukinaito.eth/running-base-node-without-docker-part-2-1c34dbca8909#:~:text=OP_NODE_NETWORK%3Dbase,9CS842lGpLmqGAYiOoDRAgmlkgnY0gmlwhLhIgb2Hb3BzdGFja4OFQgCJc2VjcDI1NmsxoQJ9FTIv8B9) [\[9\]](https://medium.com/@hiroyukinaito.eth/running-base-node-without-docker-part-2-1c34dbca8909#:~:text=,YOUR%20PUBLIC%20IP%20ADDRESS) [\[10\]](https://medium.com/@hiroyukinaito.eth/running-base-node-without-docker-part-2-1c34dbca8909#:~:text=OP_NODE_NETWORK%3Dbase,sMoeCDkusCsk4BYHjjCq04N0Y3CCJAaDdWRwgiQG%2Cenr) Running Base Node without Docker: Part 2 | by HiroyukiNaito | Medium

[https://medium.com/@hiroyukinaito.eth/running-base-node-without-docker-part-2-1c34dbca8909](https://medium.com/@hiroyukinaito.eth/running-base-node-without-docker-part-2-1c34dbca8909)

[\[46\]](https://docs.optimism.io/operators/node-operators/json-rpc#:~:text=op,opp2p_self) op-node JSON-RPC API \- Optimism Docs

[https://docs.optimism.io/operators/node-operators/json-rpc](https://docs.optimism.io/operators/node-operators/json-rpc)

[\[47\]](https://reth.rs/run/opstack/#:~:text=Stack%20chains.%20Aliases%3A%20%60,computing%20of%20the%20pending%20block) Running Reth on OP Stack chains

[https://reth.rs/run/opstack/](https://reth.rs/run/opstack/)

[\[48\]](https://github.com/base/node/issues/222#:~:text=Image%3A%20%40TangMonk) Increase global peer coverage · Issue \#222 · base/node · GitHub

[https://github.com/base/node/issues/222](https://github.com/base/node/issues/222)

[\[51\]](https://docs.libp2p.io/concepts/introduction/users/#:~:text=and%20monitoring%20of%20the%20network%E2%80%99s,libp2p%2C%20Mina%20has%20achieved%20a) [\[56\]](https://docs.libp2p.io/concepts/introduction/users/#:~:text=scalable%2C%20and%20efficient%20light%20client,nodes%2C%20crucial%20for%20decentralized%20applications) Who uses libp2p \- libp2p

[https://docs.libp2p.io/concepts/introduction/users/](https://docs.libp2p.io/concepts/introduction/users/)

[\[52\]](https://docs.optimism.io/node-operators/guides/configuration/consensus-clients#:~:text=kona) Optimism Documentation

[https://docs.optimism.io/node-operators/guides/configuration/consensus-clients](https://docs.optimism.io/node-operators/guides/configuration/consensus-clients)

[\[53\]](https://docs.rs/libp2p-request-response/latest/libp2p_request_response/#:~:text=The%20Behaviour%20%20struct%20is,are%20available%20via%20the%20Config) libp2p\_request\_response \- Rust

[https://docs.rs/libp2p-request-response/latest/libp2p\_request\_response/](https://docs.rs/libp2p-request-response/latest/libp2p_request_response/)

[\[54\]](https://stackoverflow.com/questions/72106479/point-to-point-request-response-behavior-with-libp2p#:~:text=For%20everybody%20who%20finds%20this,response%20network%20behavior) Point to point Request-Response Behavior with libp2p \- Stack Overflow

[https://stackoverflow.com/questions/72106479/point-to-point-request-response-behavior-with-libp2p](https://stackoverflow.com/questions/72106479/point-to-point-request-response-behavior-with-libp2p)

[\[55\]](https://blog.base.org/how-base-is-driving-down-fees-across-the-board-with-eip-4844#:~:text=two%20years.%20EIP,fee%20reductions%20to%20the%20Superchain) How Base is driving down fees across the board with EIP-4844

[https://blog.base.org/how-base-is-driving-down-fees-across-the-board-with-eip-4844](https://blog.base.org/how-base-is-driving-down-fees-across-the-board-with-eip-4844)