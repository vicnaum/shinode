## EIP-4444-Style History Pruning in OP Stack L2 Chains (Optimism & Base)

Both Optimism and Base (Coinbase’s OP Stack chain) are cognizant of Ethereum’s **EIP-4444** “history expiry” approach and appear to be moving in that direction. The Optimism specification explicitly notes that *“EIP-4444 will eventually provide a solution for making historical receipts available without needing to execute increasingly long chain histories.”*[\[1\]](https://specs.optimism.io/interop/derivation.html#:~:text=Reliance%20on%20History). This suggests that Optimism plans to rely on the ability to prune or outsource old block data once the ecosystem supports it. Indeed, Optimism’s rollup node had to be updated for compatibility with pruned L1 nodes: an issue filed in early 2025 highlighted that an Optimism node would throw errors if the Ethereum L1 node had pruned away the rollup’s genesis block (as allowed by EIP-4444)[\[2\]](https://github.com/ethereum-optimism/optimism/issues/13570#:~:text=Historic%20blocks%20or%20receipts%20of,prune.mode%3D%22minimal%22%60). The recommended fix was to handle missing historical L1 data gracefully, so that an OP Stack node can run against an EIP-4444-pruned L1. This indicates Optimism is preparing for a world where historical L1 blocks/receipts aren’t always available – i.e. embracing the EIP-4444 model on the L2 side as well. Base’s team has been even more explicit about managing history growth. In a 2025 scaling roadmap post, Base engineers noted they have **migrated most nodes from Geth to Reth** (a new Rust-based client) to improve performance and manage disk usage, and they mentioned that *in the future they may use alternative solutions for storing and retrieving historical state, such as the Portal Network*[\[3\]](https://blog.base.dev/scaling-base-in-2025#:~:text=To%20address%20history%20growth%20concerns%2C,Network%2C%20or%20traditional%20sharded%20databases). This implies Base is considering pruning historical data from its nodes and leveraging decentralized history storage, consistent with the spirit of EIP-4444. Base’s engineers are closely watching history growth and aim to avoid uncontrolled chain history bloat as throughput increases[\[4\]](https://blog.base.dev/scaling-base-in-2025#:~:text=growth,history%20growth%20are%20relatively%20stable)[\[5\]](https://blog.base.dev/scaling-base-in-2025#:~:text=To%20address%20history%20growth%20concerns%2C,Network%2C%20or%20traditional%20sharded%20databases). In summary, both OP Stack chains are aligned with Ethereum’s roadmap of **not requiring full archival history on every node**. While neither has publicly flipped the switch to drop old L2 history yet (given that EIP-4444 is just becoming reality on L1 now), their planning and commentary strongly suggest they **intend to adopt EIP-4444-style pruning** as it becomes viable.

## Execution Client Support (op-geth vs. op-reth)

**op-geth (Optimism’s fork of Geth)** – The Optimism team’s execution client based on Go-Ethereum inherits Geth’s features, but full history pruning on L2 has proven tricky. Upstream Ethereum clients now support “partial history expiry” (pruning) by default as of 2025[\[6\]](https://blog.ethereum.org/2025/07/08/partial-history-exp#:~:text=As%20of%20today%2C%20all%20Ethereum,information%20on%20each%20specific%20client), so in principle op-geth could stop serving ancient blocks. In practice, though, a late-2023 bug report revealed that using Geth’s snapshot pruning on Optimism caused database corruption[\[7\]](https://github.com/ethereum-optimism/op-geth/issues/193#:~:text=Using%20%60snapshot%20prune,that%20its%20DB%20is%20corrupted). The user found that after pruning and restarting, op-geth complained of a corrupted DB, implying that **op-geth wasn’t yet safe to prune** on mainnet[\[7\]](https://github.com/ethereum-optimism/op-geth/issues/193#:~:text=Using%20%60snapshot%20prune,that%20its%20DB%20is%20corrupted). The issue suggested disabling or fixing the prune functionality if it’s not supported[\[8\]](https://github.com/ethereum-optimism/op-geth/issues/193#:~:text=complains%20that%20its%20DB%20is,corrupted). This indicates that, as of that time, op-geth had not fully implemented stable history pruning for L2, even though the upstream Geth had begun implementing EIP-4444 changes. It’s likely the Optimism team is addressing these issues so that op-geth can eventually prune old blocks/bodies safely, but caution was warranted.

**op-reth (OP Stack execution client based on Reth)** – In contrast, **Reth** (Paradigm’s Rust Ethereum client, which Base and others use for OP Stack) has been aggressively rolling out history pruning features. Reth v1.5.0 (mid-2025) introduced *“pre-merge history expiry”* – effectively deleting old pre-Merge transaction data – as a first step toward full EIP-4444 support[\[9\]](https://newreleases.io/project/github/paradigmxyz/reth/release/v1.5.0#:~:text=%28%2315909%29%20%2A%20Implemented%20pre,4444%20history%20expiry%20%28%2316702). This update made pruning opt-in, but signaled that eventually full nodes will prune history by default[\[10\]](https://newreleases.io/project/github/paradigmxyz/reth/release/v1.5.0#:~:text=This%20release%20integrates%20features%20for,merge%20history%20expiry)[\[9\]](https://newreleases.io/project/github/paradigmxyz/reth/release/v1.5.0#:~:text=%28%2315909%29%20%2A%20Implemented%20pre,4444%20history%20expiry%20%28%2316702). Notably, that Reth release specifically mentioned **fixes for Base** and memory issues, and *“initiates EIP-4444 implementation”*[\[11\]](https://newreleases.io/project/github/paradigmxyz/reth/release/v1.5.0#:~:text=This%20release%20brings%20significant%20performance,merge%20history%20expiry)[\[9\]](https://newreleases.io/project/github/paradigmxyz/reth/release/v1.5.0#:~:text=%28%2315909%29%20%2A%20Implemented%20pre,4444%20history%20expiry%20%28%2316702). In other words, op-reth (being a fork or variant of Reth) is **built with history pruning in mind from the start**. Reth already supports running as a pruned “full node” that keeps only recent blocks (by default, only the last \~10064 blocks’ data) while discarding older history[\[12\]](https://reth.rs/run/faq/pruning/#:~:text=,way%20as%20an%20archive%20node)[\[13\]](https://reth.rs/run/faq/pruning/#:~:text=match%20at%20L159%20,way%20as%20an%20archive%20node). Base has been migrating its nodes to op-reth because it’s more efficient and can be configured to prune history or limit retention. The Base team even noted they are retiring Geth archive nodes entirely[\[5\]](https://blog.base.dev/scaling-base-in-2025#:~:text=To%20address%20history%20growth%20concerns%2C,Network%2C%20or%20traditional%20sharded%20databases). All this indicates that **op-reth implements EIP-4444-style pruning (or is on track to)**, aligning with Ethereum’s purge roadmap. In short, *op-geth is catching up to support safe pruning, while op-reth was designed with pruning/expiry in mind*. Both clients are converging on the ability to **drop old block bodies & receipts** to save disk space, following the EIP-4444 approach of “bounded” history.

## Portal Network for L2s: Discussions and Current Scope

Ethereum’s **Portal Network** is a new decentralized **DHT-based protocol for serving historical chain data** (blocks, receipts, state proofs, etc.) in a lightweight way. Currently, the Portal Network is focused on Ethereum **L1** data only. Its design only covers Ethereum mainnet content by default – in fact, it *“exclusively hosts Ethereum data, such as historical headers and bodies,”* acting like a distributed archive for L1[\[14\]](https://blog.ethstorage.io/ethereum-storage-roadmap-challenges-and-opportunities/#:~:text=The%20Ethereum%20Portal%20network%20serves,technique%20within%20the%20Portal%20network). There is not yet any official extension of the Portal Network for Optimism, Base, or other L2 chains. We searched for discussions about using the Portal Network with L2 history and found **no concrete proposals or implementations** targeting L2s specifically. The general understanding is that Portal Network efforts (clients like Trin, Fluffy, etc.) are **currently intended for Ethereum L1** preservation and light-client support. That said, the need for something similar on L2 is recognized. Ethereum researchers have pointed out that if L1 nodes prune history (per EIP-4444), an L2 node syncing from genesis can no longer rely on L1 peers for all the old data – it would have to fetch older batches or receipts from some external source[\[15\]](https://blog.ethstorage.io/ethereum-storage-roadmap-challenges-and-opportunities/#:~:text=Similarly%2C%20this%20consequence%20also%20applies,protocol%20indirect%20incentive). In practice this might mean L2 teams have to maintain their own archives or use centralized services unless a decentralized solution emerges. The community has floated ideas like each rollup keeping a network of “mirrors” or using 1-of-N trust assumptions to retrieve historical batch data[\[16\]](https://www.reddit.com/r/ethereum/comments/qzvsfq/impromptu_technical_ama_on_history_expiry/#:~:text=What%20would%20be%20the%20ideal,N%20trust%20model)[\[17\]](https://www.reddit.com/r/ethereum/comments/qzvsfq/impromptu_technical_ama_on_history_expiry/#:~:text=I%20imagine%20that%20there%20will,N%20trust%20model), which is analogous to what the Portal Network does for L1. However, *no formal integration between the Portal Network and OP Stack chains has been announced*.

That said, **OP Stack developers are indeed interested in the Portal Network approach**. For example, members of an Optimism-aligned team have built a Go-based Portal Network client (“Shisui”) and even a Java OP Stack client, mentioning that they started implementing the portal wire protocol while developing OP Stack software[\[18\]](https://blog.ethportal.net/posts/shisui-story#:~:text=%40thinkAfCod%20and%20I%20started%20to,completed%20the%20integration%20of%20hive). Base’s engineering blog also explicitly calls out the Portal Network as a potential solution for *“storing and retrieving historical state”* in the future[\[3\]](https://blog.base.dev/scaling-base-in-2025#:~:text=To%20address%20history%20growth%20concerns%2C,Network%2C%20or%20traditional%20sharded%20databases). These are hints that L2 teams are monitoring Portal Network development and may plan to leverage it once it matures. In the long run, we may see either the Ethereum Portal Network extended to serve L2 chains’ data, or separate portal-like networks for the major rollups. **At present, however, the Portal Network is a Layer-1 endeavor** – it’s part of Ethereum’s roadmap (the “Purge” stage) to allow L1 nodes to prune history safely[\[19\]](https://www.reddit.com/r/ethereum/comments/qzvsfq/impromptu_technical_ama_on_history_expiry/#:~:text=new%20versions%2C%20the%20core%20Ethereum,the%20way%20for%20more%20decentralization)[\[20\]](https://www.reddit.com/r/ethereum/comments/qzvsfq/impromptu_technical_ama_on_history_expiry/#:~:text=Older%20blocks%2C%20transactions%20and%20receipts%2Flogs,historical%20data%20queries%20to%20TheGraph). No official spec exists for L2 portal extensions yet, and core Portal clients don’t (yet) have knowledge of L2 block data.

**In summary:** Optimism and Base are preparing to prune historical data in their execution clients (following EIP-4444’s model of dropping old blocks/bodies). Optimism’s op-geth is addressing pruning issues, and Base’s op-reth already implements partial history expiry. On the question of the Portal Network, it’s currently an Ethereum mainnet-focused protocol, and while L2 teams have expressed interest in using similar decentralized history storage, there’s **no evidence of an active extension of the Portal Network to L2 chains at this time**. The Portal Network is, for now, *“solely and exclusively”* for Ethereum L1, with any L2 adoption likely to be a future development once L1’s portal network is proven. The idea is very much on the radar (Base’s team explicitly mentions it[\[3\]](https://blog.base.dev/scaling-base-in-2025#:~:text=To%20address%20history%20growth%20concerns%2C,Network%2C%20or%20traditional%20sharded%20databases)), but we did not find any public proposal or dev forum thread detailing a concrete plan to integrate L2s into the Portal Network – suggesting that L2s will have to roll their own history solutions or wait until the Portal Network (or a similar protocol) can support multi-chain history in a decentralized way.

**Sources:** Optimism OP Stack spec[\[1\]](https://specs.optimism.io/interop/derivation.html#:~:text=Reliance%20on%20History); Optimism GitHub (issue on L1 pruning)[\[2\]](https://github.com/ethereum-optimism/optimism/issues/13570#:~:text=Historic%20blocks%20or%20receipts%20of,prune.mode%3D%22minimal%22%60); Optimism op-geth issue[\[7\]](https://github.com/ethereum-optimism/op-geth/issues/193#:~:text=Using%20%60snapshot%20prune,that%20its%20DB%20is%20corrupted); Paradigm’s Reth release notes[\[9\]](https://newreleases.io/project/github/paradigmxyz/reth/release/v1.5.0#:~:text=%28%2315909%29%20%2A%20Implemented%20pre,4444%20history%20expiry%20%28%2316702); Base engineering blog[\[3\]](https://blog.base.dev/scaling-base-in-2025#:~:text=To%20address%20history%20growth%20concerns%2C,Network%2C%20or%20traditional%20sharded%20databases)[\[4\]](https://blog.base.dev/scaling-base-in-2025#:~:text=growth,history%20growth%20are%20relatively%20stable); EthStorage blog on history expiry & L2[\[15\]](https://blog.ethstorage.io/ethereum-storage-roadmap-challenges-and-opportunities/#:~:text=Similarly%2C%20this%20consequence%20also%20applies,protocol%20indirect%20incentive)[\[14\]](https://blog.ethstorage.io/ethereum-storage-roadmap-challenges-and-opportunities/#:~:text=The%20Ethereum%20Portal%20network%20serves,technique%20within%20the%20Portal%20network); Portal Network description[\[14\]](https://blog.ethstorage.io/ethereum-storage-roadmap-challenges-and-opportunities/#:~:text=The%20Ethereum%20Portal%20network%20serves,technique%20within%20the%20Portal%20network); Shisui client blog[\[18\]](https://blog.ethportal.net/posts/shisui-story#:~:text=%40thinkAfCod%20and%20I%20started%20to,completed%20the%20integration%20of%20hive).

---

[\[1\]](https://specs.optimism.io/interop/derivation.html#:~:text=Reliance%20on%20History) Derivation \- OP Stack Specification

[https://specs.optimism.io/interop/derivation.html](https://specs.optimism.io/interop/derivation.html)

[\[2\]](https://github.com/ethereum-optimism/optimism/issues/13570#:~:text=Historic%20blocks%20or%20receipts%20of,prune.mode%3D%22minimal%22%60) op-node: Fix compatibility with EIP-4444 enabled L1 node · Issue \#13570 · ethereum-optimism/optimism · GitHub

[https://github.com/ethereum-optimism/optimism/issues/13570](https://github.com/ethereum-optimism/optimism/issues/13570)

[\[3\]](https://blog.base.dev/scaling-base-in-2025#:~:text=To%20address%20history%20growth%20concerns%2C,Network%2C%20or%20traditional%20sharded%20databases) [\[4\]](https://blog.base.dev/scaling-base-in-2025#:~:text=growth,history%20growth%20are%20relatively%20stable) [\[5\]](https://blog.base.dev/scaling-base-in-2025#:~:text=To%20address%20history%20growth%20concerns%2C,Network%2C%20or%20traditional%20sharded%20databases) Scaling Base in 2025: Sub-cent transaction fees to bring the world onchain 

[https://blog.base.dev/scaling-base-in-2025](https://blog.base.dev/scaling-base-in-2025)

[\[6\]](https://blog.ethereum.org/2025/07/08/partial-history-exp#:~:text=As%20of%20today%2C%20all%20Ethereum,information%20on%20each%20specific%20client) Partial history expiry announcement | Ethereum Foundation Blog

[https://blog.ethereum.org/2025/07/08/partial-history-exp](https://blog.ethereum.org/2025/07/08/partial-history-exp)

[\[7\]](https://github.com/ethereum-optimism/op-geth/issues/193#:~:text=Using%20%60snapshot%20prune,that%20its%20DB%20is%20corrupted) [\[8\]](https://github.com/ethereum-optimism/op-geth/issues/193#:~:text=complains%20that%20its%20DB%20is,corrupted) op-geth cannot be safely pruned on Optimism mainnet · Issue \#193 · ethereum-optimism/op-geth · GitHub

[https://github.com/ethereum-optimism/op-geth/issues/193](https://github.com/ethereum-optimism/op-geth/issues/193)

[\[9\]](https://newreleases.io/project/github/paradigmxyz/reth/release/v1.5.0#:~:text=%28%2315909%29%20%2A%20Implemented%20pre,4444%20history%20expiry%20%28%2316702) [\[10\]](https://newreleases.io/project/github/paradigmxyz/reth/release/v1.5.0#:~:text=This%20release%20integrates%20features%20for,merge%20history%20expiry) [\[11\]](https://newreleases.io/project/github/paradigmxyz/reth/release/v1.5.0#:~:text=This%20release%20brings%20significant%20performance,merge%20history%20expiry) paradigmxyz/reth v1.5.0 on GitHub

[https://newreleases.io/project/github/paradigmxyz/reth/release/v1.5.0](https://newreleases.io/project/github/paradigmxyz/reth/release/v1.5.0)

[\[12\]](https://reth.rs/run/faq/pruning/#:~:text=,way%20as%20an%20archive%20node) [\[13\]](https://reth.rs/run/faq/pruning/#:~:text=match%20at%20L159%20,way%20as%20an%20archive%20node) Pruning & Full Node – Reth

[https://reth.rs/run/faq/pruning/](https://reth.rs/run/faq/pruning/)

[\[14\]](https://blog.ethstorage.io/ethereum-storage-roadmap-challenges-and-opportunities/#:~:text=The%20Ethereum%20Portal%20network%20serves,technique%20within%20the%20Portal%20network) [\[15\]](https://blog.ethstorage.io/ethereum-storage-roadmap-challenges-and-opportunities/#:~:text=Similarly%2C%20this%20consequence%20also%20applies,protocol%20indirect%20incentive) Ethereum Storage Roadmap: Challenges and Opportunities

[https://blog.ethstorage.io/ethereum-storage-roadmap-challenges-and-opportunities/](https://blog.ethstorage.io/ethereum-storage-roadmap-challenges-and-opportunities/)

[\[16\]](https://www.reddit.com/r/ethereum/comments/qzvsfq/impromptu_technical_ama_on_history_expiry/#:~:text=What%20would%20be%20the%20ideal,N%20trust%20model) [\[17\]](https://www.reddit.com/r/ethereum/comments/qzvsfq/impromptu_technical_ama_on_history_expiry/#:~:text=I%20imagine%20that%20there%20will,N%20trust%20model) [\[19\]](https://www.reddit.com/r/ethereum/comments/qzvsfq/impromptu_technical_ama_on_history_expiry/#:~:text=new%20versions%2C%20the%20core%20Ethereum,the%20way%20for%20more%20decentralization) [\[20\]](https://www.reddit.com/r/ethereum/comments/qzvsfq/impromptu_technical_ama_on_history_expiry/#:~:text=Older%20blocks%2C%20transactions%20and%20receipts%2Flogs,historical%20data%20queries%20to%20TheGraph) Impromptu technical AMA on history expiry : r/ethereum

[https://www.reddit.com/r/ethereum/comments/qzvsfq/impromptu\_technical\_ama\_on\_history\_expiry/](https://www.reddit.com/r/ethereum/comments/qzvsfq/impromptu_technical_ama_on_history_expiry/)

[\[18\]](https://blog.ethportal.net/posts/shisui-story#:~:text=%40thinkAfCod%20and%20I%20started%20to,completed%20the%20integration%20of%20hive) Shisui's story

[https://blog.ethportal.net/posts/shisui-story](https://blog.ethportal.net/posts/shisui-story)